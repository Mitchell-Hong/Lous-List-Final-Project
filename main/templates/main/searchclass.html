<!--
    https://www.w3schools.com/howto/howto_css_dropdown.asp = siting how to make a dropdown menu
    https://www.w3schools.com/howto/howto_js_dropdown.asp = How to make to drop down menu clickable
-->
{% extends 'main/index.html' %}
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        {% load bootstrap5 %}
        {% bootstrap_css %}
        {% bootstrap_javascript %}
    </head>
    {% block content %}
    <form name="depSelect" method="GET">
            <select name="depSelect" onchange="this.form.submit()">
                <option selected="selected" disabled>Departments</option>
                {% for dep in department_results %}
                    <option value="{{dep.abbreviation}}" {%if department == dep.abbreviation%} selected {%endif%} >{{dep.abbreviation}}</option>
                {% endfor %}
            </select>
            <select name = "instructor" {%if noDepartment%} disabled {%endif%}>
                <option selected="selected" value="none"> Instructor</option>
                {% for instructor in instructors %}
                    <option value="{{instructor}}" {%if instructorChosen == instructor%} selected {%endif%}>{{instructor}}</option>
                {% endfor %}
            </select>
            <select name = "classType" {%if noDepartment%} disabled {%endif%}>
                <option selected="selected" value = "none"> Class Type</option>
                <option value="LAB" {%if classTypeChosen == "LAB" %} selected {%endif%} >Lab</option>
                <option value="LEC" {%if classTypeChosen == "LEC" %} selected {%endif%} >Lecture</option>
                <option value="IND" {%if classTypeChosen == "IND" %} selected {%endif%} >Independent Study</option>
            </select>
            <select name = "credits" {%if noDepartment%} disabled {%endif%}>
                <option selected="selected" value = "none"> Credits</option>
                <option value="1" {%if creditsChosen == "1" %} selected {%endif%} >1</option>
                <option value="2" {%if creditsChosen == "2" %} selected {%endif%} >2</option>
                <option value="3" {%if creditsChosen == "3" %} selected {%endif%} >3</option>
            </select>
            <input type="submit" {%if noDepartment%} disabled {%endif%} name="submitbtn" value="Select">
    </form>

    <div class="d-flex ms-3 me-5">
        <div class="mt-4 flex-fill">
            <ul style="list-style-type: none;">
            {% for class in course_list_nodup %}
                <li class="my-2 d-flex" style="background-color:rgb(230, 230, 230); width: 85%;">
                    <a href="https://thecourseforum.com/course/{{ class.subject }}/{{ class.catalog_number }}/"
                    title="View TCForum" style="background-color:lightskyblue; color:black;" class="py-1 px-2 fs-4 me-0 d-inline-block">{{ class.subject }}{{ class.catalog_number }}</a>
                    <div style="background-color:slateblue" class="d-inline-block py-1 fs-4 px-3 flex-fill">{{ class.description }}</div>
                </li>
                {% for classinfo in course_list %}
                <div class='ps-2'
                    style="background-color: {% if forloop.counter|divisibleby:2 %}lightcyan
                    {% else %} rgb(255, 221, 153) {% endif %}; width: 85%;">
                    {% comment %} this is one section of the class therefore we are going to print some info about it {% endcomment %}
                    {% if classinfo.catalog_number == class.catalog_number %}

                        {% comment %} dependent on whether the search criteria matches display or not {% endcomment %}
                        {% if instructorChosen == classinfo.instructor.name or instructorChosen == "" %}
                            {% if classTypeChosen == classinfo.component or classTypeChosen == "" %}
                                {% if creditsChosen == classinfo.units or creditsChosen == "" %}
                                    <div class="d-inline">{{ classinfo.course_number  }}</div>  
                                    <div class="d-inline">{{ classinfo.instructor.name  }}</div>  
                                    <div class="d-inline">{{ classinfo.enrollment_total }}/{{ classinfo.class_capacity }}</div> 
                                    <div class="d-inline">{{ classinfo.meetings.days  }}</div>
                                    {% comment %} #array access in django template with .index {% endcomment %}
                                    <div class="d-inline">{{ classinfo.meetings.0.days  }}</div>
                                    <div class="d-inline">{{ classinfo.meetings.0.start_time|slice:":5"  }} - {{ classinfo.meetings.0.end_time|slice:":5"  }}</div>
                                    <div class="d-inline">{{ classinfo.meetings.0.facility_description  }}</div>
                                    <div class="d-inline">{{ classinfo.component        }}</div>
                                    <div class="d-inline">({{ classinfo.units            }} Credits)</div>
                                {% endif %}
                            {% endif %} 
                        {% endif %}
                    {% endif %}
                </div>
                {% endfor %}
            {% endfor %}
            </ul>
        </div>

        {% if course_list_nodup %}
        <div class='mt-4 me-5' style="width:15%;" id='shoppingCart'>
            <div class='text-white text-center px-3 py-1 fw-bold mt-2' style='background-color:darkblue'>Shopping Cart</div>
            <div class='border border-1 border-secondary'></div>
        </div>
        {% endif %}
    </div>
    {% endblock content %}
    </body>
</html>